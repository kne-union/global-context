"use strict";(self.webpackChunk_kne_components_global_context=self.webpackChunk_kne_components_global_context||[]).push([[830],{1830:(e,n,l)=>{l.r(n),l.d(n,{Consumer:()=>c,Global:()=>y,GlobalSetting:()=>p,GlobalValue:()=>x,Preset:()=>w,Provider:()=>u,context:()=>a,createContext:()=>s,default:()=>a,useContext:()=>i,useGlobalContext:()=>b,useGlobalValue:()=>v,usePreset:()=>d});var t=l(4922),r=l.n(t),o=l(8694);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,t.createContext)(e),{Provider:l,Consumer:r}=n;return{context:n,Provider:l,Consumer:r,useContext:()=>(0,t.useContext)(n)}},a=s({}),{Provider:u,Consumer:c,useContext:i}=a,b=i,d=()=>{const e=i();return Object.assign({},{apis:{}},null==e?void 0:e.preset)};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)({}).hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},g.apply(null,arguments)}const f=["preset","children"],h=(0,o.Ay)("Global",(e=>({preset:e.unknown().default({}).describe("global\u4e2d\u7684\u9884\u8bbe\u53c2\u6570\uff0c\u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\u4f20\u5165\u4e0d\u53ef\u4fee\u6539"),children:e.unknown()})),"context\u7684Provider"),y=e=>{const n=h(e),{preset:l,children:o}=n,s=function(e,n){if(null==e)return{};var l={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(n.includes(t))continue;l[t]=e[t]}return l}(n,f),[a,c]=(0,t.useState)({}),i=(0,t.useCallback)(((e,n)=>{c((l=>Object.assign({},l,{[e]:"function"===typeof n?n(l[e]):n})))}),[]);return r().createElement(u,{value:g({},s,{global:a,preset:l,setGlobal:c,setGlobalWithKey:i})},o)},k=(0,o.Ay)("GlobalSetting",(e=>({loader:e.function().describe("\u8bbe\u7f6e\u5230global\u7684\u503c\uff0c\u4e3a\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\u503c\u5bf9\uff0c\u5c06\u4f1a\u548c\u4e4b\u524d\u7684global\u8fdb\u884cObject.assign\u5408\u5e76").returns(e.promise(e.unknown())),needReady:e.boolean().default(!0).describe("\u662f\u5426\u5728global\u503c\u8bbe\u7f6e\u597d\u4e4b\u524d\u4e0d\u663e\u793achildren"),children:e.unknown()})),"\u8bbe\u7f6eglobal\u7684\u503c\uff0c\u901a\u5e38\u662f\u901a\u8fc7\u5f02\u6b65\u83b7\u53d6"),p=e=>{const{loader:n,needReady:l,children:r}=k(e),[o,s]=(0,t.useState)(!1),{global:a,setGlobal:u}=i(),c=(0,t.useRef)(null),b=(0,t.useRef)(n);return(0,t.useEffect)((()=>{b.current().then((e=>{u((n=>{const l=Object.assign({},n,e);return c.current=l,l}))}))}),[]),(0,t.useEffect)((()=>{a===c.current&&s(!0)}),[a]),l&&!o?null:r},v=(0,o.zp)("useGlobalValue",(e=>({args:[e.string().describe("globalKey:\u9700\u8981\u4eceglobal\u83b7\u53d6\u7684\u503c")],returns:e.unknown().describe("\u83b7\u53d6\u5230\u7684global\u7684key\u7684\u503c")})),"\u83b7\u53d6global\u91cc\u9762\u7684globalKey\u5bf9\u5e94\u7684\u503c\u7684hooks")((e=>{const{global:n}=i();return n[e]})),C=(0,o.Ay)("GlobalValue",(e=>[{globalKey:e.string().describe("\u9700\u8981\u83b7\u53d6\u7684global\u7684key"),children:e.function().args(e.object({value:e.unknown().describe("\u83b7\u53d6\u5230\u7684global\u7684key\u7684\u503c")}))},{children:!0,globalKey:!0}]),"\u83b7\u53d6global\u4e2dglobalKey\u7684\u503c"),x=e=>{const{globalKey:n,children:l}=C(e);return l({value:v(n)})},G=(0,o.Ay)("Preset",(e=>[{children:e.function().args(e.unknown().describe("\u9884\u8bbe\u5bf9\u8c61")).describe("\u63a5\u6536\u9884\u8bbe\u5bf9\u8c61\u7684\u65b9\u6cd5")},{children:!0}]),"\u83b7\u53d6Preset\u7684\u503c"),w=e=>{const{children:n}=G(e);return n(d())}}}]);
//# sourceMappingURL=830.4854f8d7.chunk.js.map